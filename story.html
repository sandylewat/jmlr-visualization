<!DOCTYPE HTML>
<html>

<head>
	<title>JMLR Data Visualization</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" href="assets/css/main.css" />
	<link rel="stylesheet" href="story.css" />
	<link rel="stylesheet" href="distribution/custom.css" />
</head>

<body>

	<!-- Wrapper -->
	<div id="wrapper" class="divided">
		<section class="banner style5 orient-left content-align-left image-position-right fullscreen onload-image-fade-in onload-content-fade-right">
			<div class="content">
				<h1>JMLR Data Visualization</h1>
				<p class="major">JMLR (Journal of Machine Learning Research) is one of the biggest publication journals for machine learning studies,
					with the biggest H-index in machine learning studies as of 2017. Our visualization contains some interesting insights
					that can be gotten from the publication history of JMLR.</p>
				<ul class="actions vertical">
					<li>
						<a href="http://www.jmlr.org/" class="button big wide smooth-scroll-middle">Learn More</a>
					</li>
				</ul>
			</div>
		</section>

		<!-- One -->
		<section class="banner style1 orient-left content-align-left image-position-right fullscreen onload-image-fade-in onload-content-fade-right">
			<div class="content">
				<h1>Paper Distribution</h1>
				<p class="major">JMLR paper counts on WebGL Globe. This visualization shows the big picture of papers produced by members of JMLR accross
					the globe every year.</p>
				<ul class="actions vertical">
					<li>
						<a href="distribution/" class="button big wide smooth-scroll-middle">Go Fullscreen</a>
					</li>
				</ul>
			</div>
			<div class="image" id="side-container">
				<div id="container"></div>
				<div id="currentInfo" hidden="true" class=" onload-image-fade-in onload-content-fade-right">
					<span id="year2001" class="year">2001</span>
					<span id="year2002" class="year">2002</span>
					<span id="year2003" class="year">2003</span>
					<span id="year2004" class="year">2004</span>
					<span id="year2005" class="year">2005</span>
					<span id="year2006" class="year">2006</span>
					<span id="year2007" class="year">2007</span>
					<span id="year2008" class="year">2008</span>
					<span id="year2009" class="year">2009</span>
					<span id="year2010" class="year">2010</span>
					<span id="year2011" class="year">2011</span>
					<span id="year2012" class="year">2012</span>
					<span id="year2013" class="year">2013</span>
					<span id="year2014" class="year">2014</span>
					<span id="year2015" class="year">2015</span>
					<span id="year2016" class="year">2016</span>
					<span id="year2017" class="year">2017</span>
				</div>
			</div>
		</section>

		<!-- Two -->
		<section class="spotlight style1 orient-right content-align-left image-position-center onscroll-image-fade-in" id="first">
			<div class="content">
				<h2>Citation Visualized</h2>
				<p>This visualization draws the relationship between each country's citation history (numbers of citation on papers from
					others countries and the number of times other countries cite papers from a another country) using 3D Globe. See the
					cumulative increase of papers released every year for every country with interactive histogram and relation link.</p>
				<ul class="actions horizontal">
					<li>
						<a href="relation/" class="button">Go to Visualization</a>
					</li>
				</ul>
			</div>

			<div class="image">
				<img src="images/relation.png" alt="" />
			</div>
		</section>

		<!-- Three -->
		<section class="spotlight style1 orient-left content-align-left image-position-center onscroll-image-fade-in">
			<div class="content">
				<h2>Comparison</h2>
				<p>Previous visualization shows each country's cumulative histogram. This visualization gives you the comparison of each
					country's number of papers produced. You can also jump to the relation globe by clicking the a country in this visualization's
					map.</p>
				<ul class="actions vertical">
					<li>
						<a href="dashboard/" class="button">Go to Visualization</a>
					</li>
				</ul>
			</div>
			<div class="image">
				<img src="images/dashboard.png" alt="" />
			</div>
		</section>

		<!-- Four -->
		<section class="spotlight style1 orient-right content-align-left image-position-center onscroll-image-fade-in">
			<div class="content">
				<h2>Team Members</h2>
				<h3>Data scientists</h3>
				<ul class="actions vertical">
					<li>
						<a href="#" class="button">Arief Rahman</a>
					</li>
					<li>
						<a href="#" class="button">M. Naufal</a>
					</li>
				</ul>
				<h3>Infrastructure engineer</h3>
				<ul class="actions vertical">
					<li>
						<a href="#" class="button">Sangaji Baskoro</a>
					</li>
				</ul>
				<h3>Frontend developers</h3>
				<ul class="actions vertical">
					<li>
						<a href="#" class="button">Agis Baswara</a>
					</li>
					<li>
						<a href="#" class="button">Sandy Socrates</a>
					</li>
				</ul>
			</div>

		</section>
		<!-- Six -->
		<!-- <section class="wrapper style1 align-center">
			<div class="inner">
				<h2>Technology Used</h2>
				<p>This visualization were made with technologies and libraries below.</p>
				<div class="items style1 medium onscroll-fade-in">
					<section>
						<span class="icon style2 major fa-diamond"></span>
						<h3>Lorem</h3>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper.
							Etiam eget ultrices risus nec tempor elit.</p>
					</section>
					<section>
						<span class="icon style2 major fa-save"></span>
						<h3>Ipsum</h3>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper.
							Etiam eget ultrices risus nec tempor elit.</p>
					</section>
					<section>
						<span class="icon style2 major fa-bar-chart"></span>
						<h3>Dolor</h3>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper.
							Etiam eget ultrices risus nec tempor elit.</p>
					</section>
					<section>
						<span class="icon style2 major fa-wifi"></span>
						<h3>Amet</h3>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper.
							Etiam eget ultrices risus nec tempor elit.</p>
					</section>
					<section>
						<span class="icon style2 major fa-cog"></span>
						<h3>Magna</h3>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper.
							Etiam eget ultrices risus nec tempor elit.</p>
					</section>
					<section>
						<span class="icon style2 major fa-paper-plane"></span>
						<h3>Tempus</h3>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper.
							Etiam eget ultrices risus nec tempor elit.</p>
					</section>
					<section>
						<span class="icon style2 major fa-desktop"></span>
						<h3>Aliquam</h3>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper.
							Etiam eget ultrices risus nec tempor elit.</p>
					</section>
					<section>
						<span class="icon style2 major fa-refresh"></span>
						<h3>Elit</h3>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper.
							Etiam eget ultrices risus nec tempor elit.</p>
					</section>
					<section>
						<span class="icon style2 major fa-hashtag"></span>
						<h3>Morbi</h3>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper.
							Etiam eget ultrices risus nec tempor elit.</p>
					</section>
					<section>
						<span class="icon style2 major fa-bolt"></span>
						<h3>Turpis</h3>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper.
							Etiam eget ultrices risus nec tempor elit.</p>
					</section>
					<section>
						<span class="icon style2 major fa-envelope"></span>
						<h3>Ultrices</h3>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper.
							Etiam eget ultrices risus nec tempor elit.</p>
					</section>
					<section>
						<span class="icon style2 major fa-leaf"></span>
						<h3>Risus</h3>
						<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper.
							Etiam eget ultrices risus nec tempor elit.</p>
					</section>
				</div>
			</div>
		</section> -->

		<!-- Seven -->
		<section class="banner style5 orient-left content-align-center image-position-right medium">
			<div class="content" id="feedback">
				<h2>Got something on your mind?</h2>
				<a href="https://docs.google.com/forms/d/e/1FAIpQLSe8hCknuV7J5LADHU88Lzk3imYGosF4Jj1UjI3L0Z53QM9HZg/viewform" class="button">Send Your Feedback</a>
			</div>
			<div class="image">
				<div class="gradient lines-background"></div>
			</div>
		</section>

		<!-- Footer -->
		<footer class="wrapper style1 align-center">
			<div class="inner">
				<p>&copy; Data Visualization . Team 1</p>
			</div>
		</footer>

	</div>

	<!-- Scripts -->
	<script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/jquery.scrollex.min.js"></script>
	<script src="assets/js/jquery.scrolly.min.js"></script>
	<script src="assets/js/skel.min.js"></script>
	<script src="assets/js/util.js"></script>
	<script src="assets/js/main.js"></script>
	<script type="text/javascript" src="distribution/third-party/Detector.js"></script>
	<script type="text/javascript" src="distribution/third-party/three.min.js"></script>
	<script type="text/javascript" src="distribution/third-party/Tween.js"></script>
	<script type="text/javascript" src="public/js/lib/turf.min.js"></script>
	<script type="text/javascript" src="distribution/globe.js"></script>
	<script type="text/javascript" src="data/countries2.js"></script>

	<script src="public/js/lib/projector.js"></script>
	<script src="public/js/lib/canvas-renderer.js"></script>
	<script src="public/js/lib/3d-lines-animation.js"></script>
	<script src="public/js/lib/color.js"></script>

	<script type="text/javascript">
		function check() {
			activeCountries.forEach(function (entry) {
				if (!countries.features.some(function (feature) {
					return feature.properties.name == entry;
				})) {
					console.log(entry);
				}
			}, this);
		}

		var countryGrid = [];
		var featureList = [];
		function initGrid() {
			activeCountries.forEach(function (entry) {
				var feature = countries.features.find(function (feature) {
					return feature.properties.name == entry;
				});

				featureList.push(feature);
				if (typeof feature == "undefined") {
					console.log(entry);
				} else {
					countryGrid.push({
						name: entry,
						grids: turf.coordAll(turf.pointGrid(feature, 1.5, 'degrees', true, true))
					});
				}
			}, this);
		};

		function generateData() {
			newData = [];
			data.forEach(yearData => {
				var newYearData = [yearData[0], []];
				yearData[1].forEach(element => {
					newYearData[1].push(element);
				});
				countryGrid.forEach(function (cg) {
					cg.grids.forEach(function (grid) {
						newYearData[1].push(grid[1], grid[0], getNearestMagnitude(yearData[1], grid[1], grid[0]))
					}, this);
				}, this);
				newData.push(newYearData);
			});

			return newData;
		};

		function getNearestMagnitude(yearData, lat, long) {
			var val = 0;
			var distance = Infinity;
			for (var i = 0; i < yearData.length / 3; ++i) {
				var offset = i * 3;
				var squaredDistance = (lat - yearData[offset]) * (lat - yearData[offset]) + (long - yearData[offset + 1]) * (long - yearData[offset + 1]);
				if (distance > squaredDistance) {
					distance = squaredDistance;
					val = yearData[offset + 2];
				}
			}
			return val * Math.exp(-distance / 5);
		}

		function getNearestValue(cities, lat, long, max, def = 0.001) {
			var val = def * max;
			var distance = Infinity;
			cities.forEach(function (city) {
				currentDistance = (lat - city.lat) * (lat - city.lat) + (long - city.long) * (long - city.long);
				if (distance > currentDistance) {
					distance = currentDistance;
					val = city.frequency;
				}
			}, this);
			val = val / max / 4;
			return val * Math.exp(-distance / 5);
		}

		if (!Detector.webgl) {
			Detector.addGetWebGLMessage();
		} else {
			document.body.style.backgroundImage = "distribution/loading.gif";
			var years = ['2001', '2002', '2003', '2004', '2005', '2006', '2007', '2008', '2009', '2010', '2011', '2012', '2013', '2014', '2015', '2016', '2017'];
			var container = document.getElementById('container');
			var globe = new DAT.Globe(container, { imgDir: 'distribution/' });

			console.log(globe);
			var i, tweens = [];

			var settime = function (globe, t) {
				return function () {
					new TWEEN.Tween(globe).to({ time: t / years.length }, 500).easing(TWEEN.Easing.Cubic.EaseOut).start();
					var y = document.getElementById('year' + years[t]);
					if (y.getAttribute('class') === 'year active') {
						return;
					}
					var yy = document.getElementsByClassName('year');
					for (i = 0; i < yy.length; i++) {
						yy[i].setAttribute('class', 'year');
					}
					y.setAttribute('class', 'year active');
				};
			};

			for (var i = 0; i < years.length; i++) {
				var y = document.getElementById('year' + years[i]);
				y.addEventListener('mouseover', settime(globe, i), false);
			}

			var xhr;
			TWEEN.start();

			var points = [];
			for (var lat = -15; lat < 15; ++lat) {
				for (var long = -20; long < 20; ++long) {
					points.push(lat, long, 0.005)
				}
			}

			xhr = new XMLHttpRequest();
			xhr.open('GET', 'data/slim-pub.json', true);
			xhr.onreadystatechange = function (e) {
				if (xhr.readyState === 4) {
					if (xhr.status === 200) {
						document.getElementById("currentInfo").hidden = false;
						var data = JSON.parse(xhr.responseText);
						window.data = data;
						for (i = 0; i < years.length; i++) {
							globe.addData(data[i][1], { format: 'magnitude', name: data[i][0], animated: true });
						}
						globe.createPoints();
						settime(globe, 0)();
						globe.animate();
						document.body.style.backgroundImage = 'none'; // remove loading
					}
				}
			};
			xhr.send(null);
		}
	</script>
</body>

</html>